# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`ds389`](#ds389): Set up a local 389DS server
* [`ds389::install`](#ds389install): Set up a local 389DS server
* [`ds389::instance::default`](#ds389instancedefault): Create a default instance with a common organizational LDIF

### Defined types

* [`ds389::config::item`](#ds389configitem): Modifies the running directory server configuration and restarts the service when necessary.  **IMPORTANT** Do not set sensitive values with 
* [`ds389::instance`](#ds389instance): Set up a local 389DS server

## Classes

### `ds389`

Set up a local 389DS server

#### Parameters

The following parameters are available in the `ds389` class.

##### `base_dn`

Data type: `String[2]`

The 'base' DN component of the directory server

Default value: `simplib::lookup('simp_options::ldap::base_dn', { 'default_value' => sprintf(simplib::ldap::domain_to_dn($facts['domain'], true)) })`

##### `root_dn`

Data type: `String[2]`

The default administrator DN for the directory server

Default value: `'cn=Directory Manager'`

##### `admin_password`

Data type: `Optional[String[2]]`

The password for the ``$admin_user`` and the ``$root_dn``

Default value: ``undef``

##### `listen_address`

Data type: `Simplib::IP`

The IP address upon which to listen

Default value: `'0.0.0.0'`

##### `port`

Data type: `Simplib::Port`

The port upon which to accept connections

Default value: `389`

##### `enable_admin_service`

Data type: `Boolean`

Enable the administrative interface for the GUI

Default value: ``false``

##### `admin_user`

Data type: `String[2]`

The administrative user for administrative GUI connections

Default value: `'admin'`

##### `admin_service_listen_address`

Data type: `Simplib::IP`

The IP address upon which the administrative interface should listen

Default value: `'0.0.0.0'`

##### `admin_service_port`

Data type: `Simplib::Port`

The port upon which the administrative interface should listen

Default value: `9830`

##### `service_user`

Data type: `String[1]`

The user that ``389ds`` should run as

Default value: `'nobody'`

##### `service_group`

Data type: `String[1]`

The group that ``389ds`` should run as

Default value: `'nobody'`

##### `package_ensure`

Data type: `Simplib::PackageEnsure`

What to do regarding package installation

Default value: `simplib::lookup('simp_options::package_ensure', { 'default_value' => 'installed' })`

##### `initialize_ds_root`

Data type: `Boolean`



Default value: ``false``

##### `bootstrap_ds_root_defaults`

Data type: `Boolean`



Default value: ``true``

##### `ds_root_name`

Data type: `String[1]`



Default value: `'puppet_default_root'`

##### `instances`

Data type: `Hash`



Default value: `{}`

### `ds389::install`

Set up a local 389DS server

#### Parameters

The following parameters are available in the `ds389::install` class.

##### `package_list`

Data type: `Array[String]`

A list of packages that will installed instead of the internally selected
packages.

Default value: `['389-ds-base']`

##### `setup_command`

Data type: `Stdlib::Unixpath`

The path to the setup command on the system

Default value: `'/sbin/setup-ds.pl'`

##### `admin_setup_command`

Data type: `Stdlib::Unixpath`

The path to the admin setup command on the system

Default value: `'/sbin/setup-ds-admin.pl'`

##### `enable_admin_service`

Data type: `Boolean`



Default value: `pick(getvar('ds389::enable_admin_service'), false)`

##### `admin_package_list`

Data type: `Array[String]`



Default value: `['389-admin', '389-admin-console', '389-ds-console']`

### `ds389::instance::default`

Create a default instance with a common organizational LDIF

#### Parameters

The following parameters are available in the `ds389::instance::default` class.

##### `base_dn`

Data type: `Optional[String[2]]`

The 'base' DN component of the instance

Default value: ``undef``

##### `root_dn`

Data type: `Optional[String[2]]`

The default administrator DN for the instance

Default value: ``undef``

##### `admin_password`

Data type: `Optional[String[2]]`

The password for the ``$admin_user`` and the ``$root_dn``

Default value: ``undef``

##### `listen_address`

Data type: `Simplib::IP`

The IP address upon which to listen

Default value: `'0.0.0.0'`

##### `port`

Data type: `Simplib::Port`

The port upon which to accept connections

Default value: `389`

##### `enable_admin_service`

Data type: `Boolean`

Enable the administrative interface for the GUI

Default value: ``false``

##### `admin_user`

Data type: `String[2]`

The administrative user for administrative GUI connections

Default value: `'admin'`

##### `admin_service_listen_address`

Data type: `Simplib::IP`

The IP address upon which the administrative interface should listen

Default value: `'127.0.0.1'`

##### `admin_service_port`

Data type: `Simplib::Port`

The port upon which the administrative interface should listen

Default value: `9830`

##### `service_user`

Data type: `String[1]`

The user that ``389ds`` should run as

Default value: `'nobody'`

##### `service_group`

Data type: `String[1]`

The group that ``389ds`` should run as

Default value: `'nobody'`

##### `bootstrap_ldif_content`

Data type: `Optional[String[1]]`

The content that should be used to initialize the directory

Default value: ``undef``

##### `instance_name`

Data type: `String[1]`



##### `bootstrap_with_defaults`

Data type: `Boolean`



Default value: ``true``

##### `admin_domain`

Data type: `Simplib::Domain`



Default value: `$facts['domain']`

##### `machine_name`

Data type: `String[1]`



Default value: `$facts['fqdn']`

##### `ds_setup_ini_content`

Data type: `Optional[String[1]]`



Default value: ``undef``

##### `config_dir`

Data type: `Stdlib::Absolutepath`



Default value: `'/usr/share/puppet_ds389_config'`

##### `users_group_id`

Data type: `Integer[1]`



Default value: `100`

##### `administrators_group_id`

Data type: `Integer[500]`



Default value: `700`

## Defined types

### `ds389::config::item`

Modifies the running directory server configuration and restarts the service
when necessary.

**IMPORTANT** Do not set sensitive values with this until it switches over to
being a native type!

#### Parameters

The following parameters are available in the `ds389::config::item` defined type.

##### `key`

Data type: `String[1]`

The configuration key to be set

  * You can get a list of all configuration keys by running:
    ``ldapsearch -H ldap://localhost:389 \
    -y /usr/share/puppet_ds389_config/<instance_name>_ds_pw.txt \
    -D "cn=SIMP Directory Manager" -s base -b "cn=config"``

##### `value`

Data type: `String[1]`

The value that should be set for ``$key``

##### `admin_dn`

Data type: `String[2]`

A DN with administrative rights to the directory

##### `pw_file`

Data type: `Stdlib::Absolutepath`

A file containing the password for use with ``$admin_dn``

##### `service_name`

Data type: `Simplib::Systemd::ServiceName`

The Puppet resource name for the directory ``Service`` resource

##### `restart_service`

Data type: `Boolean`

Whether or not to restart the directory server after applying this item

  * There is a known list of items in the module data that will always
    generate a restart action

Default value: ``false``

##### `host`

Data type: `Simplib::Host`

The host where the service is running

Default value: `'127.0.0.1'`

##### `port`

Data type: `Simplib::Port`

The port to which to connect

Default value: `389`

##### `base_dn`

Data type: `String[2]`

The DN that holds the directory configuration items

Default value: `'cn=config'`

##### `encrypt_connection`

Data type: `Boolean`

If set to `false`, do not require encryption for off-host connections.

* Loopback connections are never encrypted.

Default value: ``true``

### `ds389::instance`

Set up a local 389DS server

#### Parameters

The following parameters are available in the `ds389::instance` defined type.

##### `base_dn`

Data type: `Optional[String[2]]`

The 'base' DN component of the directory server

Default value: ``undef``

##### `root_dn`

Data type: `Optional[String[2]]`

The default administrator DN for the directory server

Default value: ``undef``

##### `admin_password`

Data type: `Optional[String[2]]`

The password for the ``$admin_user`` and the ``$root_dn``

Default value: ``undef``

##### `listen_address`

Data type: `Simplib::IP`

The IP address upon which to listen

Default value: `'127.0.0.1'`

##### `port`

Data type: `Simplib::Port`

The port upon which to accept connections

Default value: `389`

##### `enable_admin_service`

Data type: `Boolean`

Enable the administrative interface for the GUI

Default value: ``false``

##### `admin_user`

Data type: `String[2]`

The administrative user for administrative GUI connections

Default value: `'admin'`

##### `admin_service_listen_address`

Data type: `Simplib::IP`

The IP address upon which the administrative interface should listen

Default value: `'127.0.0.1'`

##### `admin_service_port`

Data type: `Simplib::Port`

The port upon which the administrative interface should listen

Default value: `9830`

##### `service_user`

Data type: `String[1]`

The user that ``389ds`` should run as

Default value: `'nobody'`

##### `service_group`

Data type: `String[1]`

The group that ``389ds`` should run as

Default value: `'nobody'`

##### `bootstrap_ldif_content`

Data type: `Optional[String[1]]`

The content that should be used to initialize the directory

Default value: ``undef``

##### `package_ensure`

Data type: `Simplib::PackageEnsure`

What to do regarding package installation

Default value: `simplib::lookup('simp_options::package_ensure', { 'default_value' => 'installed' })`

##### `ensure`

Data type: `Enum['present','absent']`



Default value: `'present'`

##### `admin_domain`

Data type: `Simplib::Domain`



Default value: `$facts['domain']`

##### `machine_name`

Data type: `String[1]`



Default value: `$facts['fqdn']`

##### `ds_setup_ini_content`

Data type: `Optional[String[1]]`



Default value: ``undef``

##### `config_dir`

Data type: `Stdlib::Absolutepath`



Default value: `'/usr/share/puppet_ds389_config'`

